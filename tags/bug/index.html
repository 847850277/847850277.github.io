<!DOCTYPE html>
<html class="nojs" lang="zh-cn" dir="ltr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>bug – ZhengPengDe Blog</title>
<link rel="alternate" type="application/rss+xml" title="rss" href="https://847850277.github.io/tags/bug/index.xml">
<meta name="description" content="">
<meta name="created" content="2015-07-01T09:00:00+0000">
<meta name="modified" content="2023-06-01T09:00:00+0000">


<meta property="og:site_name" content="ZhengPengDe Blog">
<meta property="og:title" content="bug">
<meta property="og:url" content="https://847850277.github.io/tags/bug/">
<meta property="og:type" content="website">

<meta name="generator" content="Hugo 0.112.5">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="theme-color" content="#ffffff">


<link rel="canonical" href="https://847850277.github.io/tags/bug/">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">

<link rel="stylesheet" href="/css/styles.f5f42549a2ff6655f6895613fdad4142b37562f0565fa9def394a039f13e54fa.css">
<link rel="stylesheet" href="/css/print.31e2819287afc91406f2fd43d21a8ba4a0cdfc272e439c90db0c6e47efc7c346.css" media="print">

<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "WebPage",
    "url" : "https://847850277.github.io/tags/bug/",
    "name": "bug",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://847850277.github.io/"
    },
    "publisher": {
      "@type": "Organization",
      "name": "ZhengPengDe Blog",
      "url": "https://847850277.github.io/"
    }
  }
</script>

<script src="/js/script-early.min.21220209af63c496c7531316922ef9a4548661be9388bbcd1f9899bb0b842b21.js"></script>

<script defer src="/js/script.min.f8f04035e9a9424ebc267c1a5fdb513d79b611a04b85cab2ac414d091ac9e94c.js"></script>



</head>

<body class="list-page">
<div class="page layout__page">
<header class="header layout__header mb--m">
<a href="/" title="Home" rel="home" class="header__logo">
<img src="/images/logo.png" alt="Home" class="header__logo-image">
</a>
<h1 class="header__site-name">
<a href="/" title="Home" class="header__site-link" rel="home"><span>ZhengPengDe Blog</span></a>
</h1>
<div class="region header__region">
</div>
</header>

<nav class="main-menu layout__navigation" aria-label="Main menu">
<ul class="navbar">
<li><a href="/" aria-current="page">Home</a></li>
<li><a href="/posts/">Posts</a></li>
</ul>
</nav>
<main class="main layout__main">
<header>
<h1 class="title">bug</h1>
</header>

<article class="list-view list-view--posts">
<header>
<h2 class="title "><a href="/posts/bug/bug/">bug 记录</a></h2>

</header>
<div class="content">
<p>bug清单表格 1、springboot上传文件，报流关闭错误 现象 : springboot上传文件，报流关闭错误 原因 : 项目中增加了全局的GlobalWebAppConfig，其中的配置导致流关闭失效 解决方式 : 移除@EnableWebMvc注解 过程总结 : 本地复现 定位问题点 （移除pom），注释依赖 确定问题点确实是新增配置 网上搜索解决方式 记录时间 : 2021-08-21 2、某些sql会在limit后追加一个limit，导致查询sql报错 现象 : 某些sql会在limit后追加一个limit，导致查询sql报错 原因 : PageHelper 非安全调用方式，项目中使用方式为PageHelper.startPage,此种方式背后实现原理为： ThreadLocal设置线程局部变量，tomcat线程次会缓存请求，可能导致threadlocal中的线程变量被其他线程访问到 解决方式 : springmvc层增加全局的拦截器， 然后手动移除一下pageHelper的变量 过程总结 : 定位问题 网上搜索确实发现limit可能会是pagehelper导致 再次定位threadlocal设置变量，设置tomcat工作线程设置为1个 本地手写分页复现场景，分页参数设置，未查询数据库，手动触发报错 增加全局分页拦截器解决 记录时间 : 2021-08-21 3、请求接口，返回90044错误 现象 : 请求接口，返回90044错误 原因 : 2.0网关配置中，只建立了bi的服务，在角色那一栏并未配置bi相关的服务 解决方式 : 2.0网关配置erp-api的相关权限 1、定位问题9004 2、查询9004为请求接口超出授权范围 3、访问灰度复现出改问题 过程总结 : 定位问题9004 查询9004为请求接口超出授权范围 访问灰度复现出改问题 找运维老师确认2.0网关的配置问题 确认配置问题、增加配置 记录时间 : 2021-08-23 4、小程序获取手机号授权，并未生成响应的学员记录 现象 : 小程序获取手机号授权，并未生成响应的学员记录 原因 : 营销服务调用crm服务，crm服务新增授权类型客户的时候没有写入电话字段 解决方式 : 入口出增加电话字段 过程总结 : httplog寻找入参数， ```sql select * from alc-http-log.</p>
</div>
</article>

<article class="list-view list-view--posts">
<header>
<h2 class="title "><a href="/posts/bug/bug_bak/">bug 记录</a></h2>

</header>
<div class="content">
<p>bug清单表格 springboot上传文件，报流关闭错误 某些sql会在limit后追加一个limit，导致查询sql报错 请求接口，返回90044错误 小程序获取手机号授权，并未生成响应的学员记录 crm服务导入数据、特定的获客渠道（异界交换）才能够导入 支付成功后，在crm的h5页面填入分单的数据、结果分单后的比例并没有按对应比例保存 有一个定时然后推送消息的功能，同时推送短信和微信模版消息。 订单支付成功，生成了3条相同的费用明细，同时生成了三个正式学员，有预警邮件提醒 在正式学员列表里面，搜索姓名姓名无法找到该学员，但是搜索学员昵称或者电话号码又可以找到该学员&hellip; 通过转介绍渠道来的新的意向客户数据，其跟进人的扫码归属人字段未写入值 omo转介绍小程序，提交了预约相关信息，其生成了活动记录，但是并未生成客户记录 数据字典的校区由新校变成老校定时未生效 启动项目提示拿不到数据库的链接 暑期三节课发起支付后，订单支付状态未变更为支付中 1.客户详细存在跟进人为空的数据2.sql查询的逻辑为即查询跟进人的id，又查询冗余跟进人名称，同时冗余跟进人名称会存在为空的数据 导出正式学员列表增加扫码归属人和收单人员两列字段 优惠券退款，点击驳回或者废除。若原状态为已经回收，其状态还是变更成未使用，并没有退回为原本状态 线上支付在使用支付宝付款时候提示“操作失败：网络或者服务器错误” 定时同步标签，但是其值并未写入数据库 selenium模拟微信登陆选择封面图失败，报js的异常 活动小程序部分用户唤起支付控件失败 模拟代码用队列发送前置消息失败，但是走支付流程真实付款，前置流程成功。且调用发送MQ的方法为同一个，并无差异 模拟支付集成测试用例的数据驱动的开发 hexo 下的分类和表签无法显示，怎么解决？ 增加@transactional，定时调度生成了多条记录 优惠券状态后置，导致执行更新优惠券状态失败，影响整个订单后置流程 请求接口，返回90044错误 datagrip导出文件自动加双引号 排查order服务中一分钟GC次数大于30次 支付高并发场景下数据库间隙锁导致的数据库死锁 Mockito given willReturn 没有正确返回 }, &quot;mappings&quot;:{ &quot;_doc&quot;:{ &quot;properties&quot;:{ &quot;id&quot;:{ &quot;type&quot;:&quot;text&quot;, &quot;fields&quot;:{ &quot;keyword&quot;:{ &quot;type&quot;:&quot;keyword&quot;, &quot;ignore_above&quot;:256 } } }, &quot;request_time&quot;:{ &quot;type&quot;:&quot;text&quot;, &quot;fields&quot;:{ &quot;keyword&quot;:{ &quot;type&quot;:&quot;keyword&quot;, &quot;ignore_above&quot;:256 } } } } } }, &quot;settings&quot;:{ &quot;index&quot;:{ &quot;creation_date&quot;:&quot;1637288113508&quot;, &quot;number_of_shards&quot;:&quot;5&quot;, &quot;number_of_replicas&quot;:&quot;1&quot;, &quot;uuid&quot;:&quot;x-dn1nyfTlShjKD8n-HUGQ&quot;, &quot;version&quot;:{ &quot;created&quot;:&quot;6080099&quot; }, &quot;provided_name&quot;:&quot;index_pay_center_request_dev&quot; } } } } 4、扩展增加long类型的请求时间和long类型的响应时间 &lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;th&gt;&lt;a name=&quot;27&quot;&gt;27&lt;/a&gt;&lt;/th&gt; &lt;th&gt;2021-12-01&lt;/th&gt; &lt;th&gt; 优惠券过期导致支付成功的后置流程失败 &lt;/th&gt; &lt;th&gt; 然后创建订单的时候，优惠券状态为使用中，执行定时任务导致使用中变成过期。从而导致整个订单后置流程失败。 &lt;/th&gt; &lt;th&gt; 1.</p>
</div>
</article>


</main>


<footer class="footer layout__footer mt--l">
<p><span>© ZhengPengDe Blog</span></p>


</footer>

</div>
</body>
</html>
