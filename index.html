<!DOCTYPE html>
<html class="nojs" lang="zh-cn" dir="ltr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>ZhengPengDe Blog</title>
<link rel="alternate" type="application/rss+xml" title="rss" href="https://847850277.github.io/index.xml">
<meta name="description" content="">
<meta name="created" content="2023-06-19T09:00:00+0000">
<meta name="modified" content="2023-06-19T09:00:00+0000">


<meta property="og:site_name" content="ZhengPengDe Blog">
<meta property="og:title" content="ZhengPengDe Blog">
<meta property="og:url" content="https://847850277.github.io/">
<meta property="og:type" content="website">

<meta name="generator" content="Hugo 0.112.5">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="theme-color" content="#ffffff">


<link rel="canonical" href="https://847850277.github.io/">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">

<link rel="stylesheet" href="/css/styles.f5f42549a2ff6655f6895613fdad4142b37562f0565fa9def394a039f13e54fa.css">
<link rel="stylesheet" href="/css/print.31e2819287afc91406f2fd43d21a8ba4a0cdfc272e439c90db0c6e47efc7c346.css" media="print">

<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "WebPage",
    "url" : "https://847850277.github.io/",
    "name": "ZhengPengDe Blog",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://847850277.github.io/"
    },
    "publisher": {
      "@type": "Organization",
      "name": "ZhengPengDe Blog",
      "url": "https://847850277.github.io/"
    }
  }
</script>

<script src="/js/script-early.min.21220209af63c496c7531316922ef9a4548661be9388bbcd1f9899bb0b842b21.js"></script>

<script defer src="/js/script.min.f8f04035e9a9424ebc267c1a5fdb513d79b611a04b85cab2ac414d091ac9e94c.js"></script>



</head>

<body class="list-page front">
<div class="page layout__page">
<header class="header layout__header mb--m">
<a href="/" title="Home" rel="home" class="header__logo">
<img src="/images/logo.png" alt="Home" class="header__logo-image">
</a>
<h1 class="header__site-name">
<a href="/" title="Home" class="header__site-link" rel="home"><span>ZhengPengDe Blog</span></a>
</h1>
<div class="region header__region">
</div>
</header>

<nav class="main-menu layout__navigation" aria-label="Main menu">
<ul class="navbar">
<li><a href="/" aria-current="page">Home</a></li>
<li><a href="/posts/">Posts</a></li>
</ul>
</nav>
<main class="main layout__main">
<article class="list-view list-view--posts">
<header>
<h2 class="title "><a href="/posts/2023/web/">常用web记录</a></h2>

</header>
<div class="content">
<p>常用的网站记录 在线markdown
docker国内镜像加速
另一个maven仓库
java全栈知识体系
jdk版本-爪哇我话你知
代码随想录-算法
labuladong 的算法小抄
Data Structure Visualizations
股票自动交易助手
excalidraw
v2ex</p>
</div>
</article>

<article class="list-view list-view--posts">
<header>
<h2 class="title "><a href="/posts/2023/spi/">Java的spi机制</a></h2>

</header>
<div class="content">
<p>Java的spi机制 </p>
</div>
</article>

<article class="list-view list-view--posts">
<header>
<h2 class="title "><a href="/posts/dubbo/dubbo-upload/">dubbo是否有对文件上传下载导入导出的支持</a></h2>

</header>
<div class="content">
<p>dubbo是否有对文件上传下载导入导出的支持 项目当前架构： HTTP请求 -&gt; 网关SpringCloudGateway -&gt; 网关路由匹配 -&gt; 网关dubbo泛化调用 -&gt; dubbo服务 但与文件相关的操作，还是需要以Controller的形式暴露服务，因为涉及HttpServletResponse、ModelAndView、MultipartFile这些对象，如： @PostMapping(&#34;/upload&#34;) public Result uploadFile(@RequestParam(&#34;file&#34;) MultipartFile file) { ...... } **问题：**请问dubbo可支持文件类型的操作，向外暴露服务，从而去除掉controller ？ 对于大文件类型的操作，我们建议在首次接收到 MultipartFile 请求之后将文件存储到 HDFS 或者 OSS 等存储介质上，然后在后端传递的时候直接通过一个标识符传递。对于小文件，将 file 转换成 byte 数组传递就行。 这个想的有点大，dubbo专注于分布式式RPC框架，如果把MVC功能，或者消息堆积之类的功能都实现了，就不太好专注于RPC，想的大一些其实可以考虑一些子项目Dubbo-MVC, Dubbo-MQ ，Dubbo-Framework 😄 dubbo是否有对文件上传下载导入导出的支持</p>
</div>
</article>

<article class="list-view list-view--posts">
<header>
<h2 class="title "><a href="/posts/apache-shenyu/maven-package/">apache shenyu 打包命令集</a></h2>

</header>
<div class="content">
<p>打包常用的命令 # example打包 ./mvnw -B clean install -Pexample -DskipTests -f ./shenyu-examples/shenyu-examples-springcloud/pom.xml ./mvnw -B clean install -Pexample -DskipTests -f ./shenyu-examples/shenyu-examples-dubbo/pom.xml ./mvnw -B clean install -DskipTests -f ./shenyu-client/pom.xml # 集成测试打包 ./mvnw -B clean install -Pit -DskipTests -f ./shenyu-integrated-test/shenyu-integrated-test-spring-cloud/pom.xml ./mvnw -B clean install -Pit -DskipTests -f ./shenyu-integrated-test/shenyu-integrated-test-alibaba-dubbo/pom.xml ./mvnw -B clean install -Pit -DskipTests -f ./shenyu-integrated-test/shenyu-integrated-test-common/pom.xml ./mvnw -B clean install -Pit -DskipTests -f ./shenyu-integrated-test/pom.xml # docker-compose启动 docker-compose -f ./shenyu-integrated-test/shenyu-integrated-test-spring-cloud/docker-compose.yml up -d docker-compose -f ./shenyu-integrated-test/shenyu-integrated-test-alibaba-dubbo/docker-compose.yml up -d # 执行测试 .</p>
</div>
</article>

<article class="list-view list-view--posts">
<header>
<h2 class="title "><a href="/posts/my-first/">我的第一篇博客</a></h2>

</header>
<div class="content">
<p>这里是Markdown 正文 hello world</p>
</div>
</article>

<article class="list-view list-view--posts">
<header>
<h2 class="title "><a href="/posts/2023/renewal_integration_testing/">非正规集成&#43;压力测试</a></h2>

</header>
<div class="content">
<p>非正规集成测试和性能测试 6月份公司最重要的续费活动就要开始了,期间功能方面的改动不是特别大。但需要做性能测试和全部数据方面的验证。 基于以上(全部数据的验证、性能测试)目的，于是需要对接口进行性能测试。
1、工具调研 在工具调研方面，市面上常见的性能测试工具有以下。
JMeter Apache Bench TestNG LoadRunner 基于熟悉上手和对公司业务数据的了解程度，最后选择了TestNG。原因有:
编码方便，灵活 数据驱动方式还不错 灵活的设置线程数 基于TestNG可以很灵活的设计一样宽表来保存结果集。 最后设计的表结构如下 create table renewalintegrationtesting.t_2023_renewal_list ( id bigint auto_increment primary key, student_num varchar(128) null, student_id varchar(36) null, phone varchar(255) null, customer_id varchar(500) null, app_token varchar(255) null, authorization varchar(255) null, step1_url varchar(500) null comment &#39;步骤一的接口地址&#39;, step1_request text null, step1_response text null, step1_success tinyint default 0 not null comment &#39;步骤一执行结果0-不成功1-成功&#39;, step2_url varchar(500) null comment &#39;步骤二的接口地址&#39;, step2_request text null, step2_response text null, step2_success tinyint default 0 not null comment &#39;步骤二执行结果0-不成功1-成功&#39;, step3_url varchar(500) null comment &#39;步骤3的接口地址&#39;, step3_request text null, step3_response text null, step3_success tinyint default 0 not null comment &#39;步骤3执行结果0-不成功1-成功&#39;, step4_url varchar(500) null comment &#39;步骤4的接口地址&#39;, step4_request text null, step4_response text null, step4_success tinyint default 0 not null comment &#39;步骤4执行结果0-不成功1-成功&#39;, step5_url varchar(500) null comment &#39;步骤5的接口地址&#39;, step5_request text null, step5_response text null, step5_success tinyint default 0 not null comment &#39;步骤5执行结果0-不成功1-成功&#39;, step6_url varchar(500) null comment &#39;步骤6的接口地址&#39;, step6_request text null, step6_response text null, step6_success tinyint default 0 not null comment &#39;步骤6执行结果0-不成功1-成功&#39;, step7_url varchar(500) null comment &#39;步骤7的接口地址&#39;, step7_request text null, step7_response text null, step7_success tinyint default 0 not null comment &#39;步骤7执行结果0-不成功1-成功&#39;, step8_url varchar(500) null comment &#39;步骤8的接口地址&#39;, step8_request text null, step8_response text null, step8_success tinyint default 0 not null comment &#39;步骤8执行结果0-不成功1-成功&#39;, step9_url varchar(500) null comment &#39;步骤9的接口地址&#39;, step9_request text null, step9_response text null, step9_success tinyint default 0 not null comment &#39;步骤9执行结果0-不成功1-成功&#39;, step10_url varchar(500) null comment &#39;步骤10的接口地址&#39;, step10_request text null, step10_response text null, step10_success tinyint default 0 not null comment &#39;步骤10执行结果0-不成功1-成功&#39; ); 2、测试用例的编写 示例测试用例代码如查看订单列表</p>
</div>
</article>

<article class="list-view list-view--posts">
<header>
<h2 class="title "><a href="/posts/redis/redis-distributed-lock-use/">redis使用分布式锁记</a></h2>

</header>
<div class="content">
<p>使用redis分布式锁记 背景介绍 在项目中使用封装的redis锁注解中，会出现异常信息。抛出拿分布式锁异常。
跟源码 其中lock对象为false的情况下会抛出Get redis lock failed的业务异常 @Around(&#34;redisLockPoint() &amp;&amp; @annotation(redisLock)&#34;) public Object around(ProceedingJoinPoint pjp, RedisLock redisLock) throws Throwable { String key = redisLock.key(); if (StringUtils.isBlank(key)) { Object[] args = pjp.getArgs(); if (redisLock.bindType().equals(RedisLock.BindType.DEFAULT)) { key = StringUtils.join(args); } else if (redisLock.bindType().equals(RedisLock.BindType.ARGS_INDEX)) { key = getArgsKey(redisLock, args); } else if (redisLock.bindType().equals(RedisLock.BindType.OBJECT_PROPERTIES)) { key = getObjectPropertiesKey(redisLock, args); } } Assert.hasText(key, &#34;key does not exist&#34;); String prefix = redisLock.prefix()+&#34;_&#34;; boolean lock = distributedRedisLock.lock(prefix + key, redisLock.</p>
</div>
</article>

<article class="list-view list-view--posts">
<header>
<h2 class="title "><a href="/posts/bug/bug/">bug 记录</a></h2>

</header>
<div class="content">
<p>bug清单表格 1、springboot上传文件，报流关闭错误 现象 : springboot上传文件，报流关闭错误 原因 : 项目中增加了全局的GlobalWebAppConfig，其中的配置导致流关闭失效 解决方式 : 移除@EnableWebMvc注解 过程总结 : 本地复现 定位问题点 （移除pom），注释依赖 确定问题点确实是新增配置 网上搜索解决方式 记录时间 : 2021-08-21 2、某些sql会在limit后追加一个limit，导致查询sql报错 现象 : 某些sql会在limit后追加一个limit，导致查询sql报错 原因 : PageHelper 非安全调用方式，项目中使用方式为PageHelper.startPage,此种方式背后实现原理为： ThreadLocal设置线程局部变量，tomcat线程次会缓存请求，可能导致threadlocal中的线程变量被其他线程访问到 解决方式 : springmvc层增加全局的拦截器， 然后手动移除一下pageHelper的变量 过程总结 : 定位问题 网上搜索确实发现limit可能会是pagehelper导致 再次定位threadlocal设置变量，设置tomcat工作线程设置为1个 本地手写分页复现场景，分页参数设置，未查询数据库，手动触发报错 增加全局分页拦截器解决 记录时间 : 2021-08-21 3、请求接口，返回90044错误 现象 : 请求接口，返回90044错误 原因 : 2.0网关配置中，只建立了bi的服务，在角色那一栏并未配置bi相关的服务 解决方式 : 2.0网关配置erp-api的相关权限 1、定位问题9004 2、查询9004为请求接口超出授权范围 3、访问灰度复现出改问题 过程总结 : 定位问题9004 查询9004为请求接口超出授权范围 访问灰度复现出改问题 找运维老师确认2.0网关的配置问题 确认配置问题、增加配置 记录时间 : 2021-08-23 4、小程序获取手机号授权，并未生成响应的学员记录 现象 : 小程序获取手机号授权，并未生成响应的学员记录 原因 : 营销服务调用crm服务，crm服务新增授权类型客户的时候没有写入电话字段 解决方式 : 入口出增加电话字段 过程总结 : httplog寻找入参数， ```sql select * from alc-http-log.</p>
</div>
</article>


</main>


<footer class="footer layout__footer mt--l">
<p><span>© ZhengPengDe Blog</span></p>


</footer>

</div>
</body>
</html>
